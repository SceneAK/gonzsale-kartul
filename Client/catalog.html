<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Item Catalog</title>
    <style>
        /* Body and general styles */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }

        .catalog {
            padding: 20px;
        }

        /* Tab links */
        .tablink {
            background-color: #f9f9f9;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            font-size: 16px;
        }

        .tablink:hover {
            background-color: #ddd;
        }

        /* Tab content */
        .tabcontent {
            display: none;
            padding: 20px;
            background-color: #fff;
        }

        .item {
            display: inline-block;
            margin: 10px;
            text-align: center;
        }

        .item img {
            width: 150px;
            height: 150px;
        }

        .item p {
            font-size: 16px;
        }

        /* Active class for the selected tablink */
        .active {
            background-color: #ff9900;
            color: white;
        }

        #food-items-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }

        .food-item {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 10px;
            width: 200px;
            text-align: center;
        }

        .food-item-image {
            width: 100%;
            height: auto;
            border-radius: 5px;
        }

        .food-item-title {
            font-size: 18px;
            margin: 10px 0;
        }

        .food-item-description {
            font-size: 14px;
            color: #555;
        }

        .food-item-price {
            font-size: 16px;
            font-weight: bold;
            margin: 10px 0;
        }

        .food-item-add-to-cart {
            background-color: #28a745;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
        }

        .food-item-add-to-cart:hover {
            background-color: #218838;
        }
    </style>
</head>

<body>
    <!-- Header section -->
    <div id="header"></div>

    <!-- Main content -->
    <div class="catalog">
        <h1>Item Catalog</h1>

        <!-- Category Contents -->
        <div id="Shirts" class="tabcontent">
            <div id="shirt-items-container"></div>
        </div>

        <div id="Pants" class="tabcontent">
            <div id="pant-items-container"></div>
        </div>

        <div id="Food" class="tabcontent">
            <div id="food-items-container">
                <!-- Placeholder for shopping items -->
                <div class="food-item">
                    <img src="placeholder.jpg" alt="Item Image" class="food-item-image">
                    <h3 class="food-item-title">Item Name</h3>
                    <p class="food-item-description">Short description of the item.</p>
                    <p class="food-item-price">$0.00</p>
                    <button class="food-item-add-to-cart">Add to Cart</button>
                    <script>console.log('PLACEHOLDER LOADED');</script>
                </div>
                <div class="food-item">
                    <img src="placeholder.jpg" alt="Item Image" class="food-item-image">
                    <h3 class="food-item-title">Item Name</h3>
                    <p class="food-item-description">Short description of the item.</p>
                    <p class="food-item-price">$0.00</p>
                    <button class="food-item-add-to-cart">Add to Cart</button>
                </div>
                <!-- Repeat as needed -->
            </div>
        </div>


        <div id="Drinks" class="tabcontent">
            <div id="sticker-items-container"></div>
        </div>

        <div id="Accessories" class="tabcontent">
            <div id="accessory-items-container"></div>
        </div>

        <!-- <div id="Food" class="tabcontent">
            <div id="food-items-container"></div>
        </div>

        <div id="Drinks" class="tabcontent">
            <div id="drink-item-container"></div>
        </div> -->

        <div id="All" class="tabcontent">
            <div id="all-items-container"></div>
        </div>
    </div>

    <!-- Footer section -->
    <div id="footer"></div>

    <script>
        // Handle switching between tabs
        function openCategory(evt, categoryName) {
            const tabcontents = document.getElementsByClassName("tabcontent");
            const tablinks = document.getElementsByClassName("tablink");

            // Hide all tab contents
            for (const tab of tabcontents) {
                tab.style.display = "none";
            }

            // Remove active class from all tab links
            for (const link of tablinks) {
                link.classList.remove("active");
            }

            // Show the selected category's content
            document.getElementById(categoryName).style.display = "block";
            if (evt) evt.currentTarget.classList.add("active");
        }

        // Function to fetch items from API
        async function fetchItems(category, containerId) {
            try {
                const url = `${window.location.protocol}://${window.location.host}`;
                console.log(url);
                const response = await fetch(`http://localhost:3000/${category}`);
                if (!response.ok) throw new Error(`Failed to fetch ${category} items`);

                const items = await response.json();
                const container = document.getElementById(containerId);

                // Clear container and populate items
                container.innerHTML = '';
                items.forEach(item => {
                    const itemDiv = document.createElement("div");
                    itemDiv.classList.add("item");


                    itemDiv.innerHTML = `
                        <img src="${item.product_imgUrl}" alt="${item.product_name}" />
                        <p>${item.product_name} - ${item.product_price} ${item.product_unit}</p>
                    `;
                    container.appendChild(itemDiv);
                });
                console.log(container.innerHTML);
            } catch (error) {
                console.error(`Error fetching ${category} items:`, error);
                // document.getElementById(containerId).innerHTML = `<p>Failed to load ${category} items. Please try again later.</p>`;
            }
        }

        // Automatically load content for all categories
        document.addEventListener("DOMContentLoaded", function () {
            const categories = {
                Shirts: "shirt-items-container",
                Pants: "pant-items-container",
                Accessories: "accessory-items-container",
                Food: "food-items-container",
                Stickers: "drink-item-container",
                All: "all-items-container",
            };

            // Fetch items for each category
            for (const [category, containerId] of Object.entries(categories)) {
                fetchItems(category.toLowerCase(), containerId);
            }

            // Default open Shirts tab
            openCategory(null, "Food");
        });
    </script>
    <script src="dropdown.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            initializePage(); // Initialize the shared functionality
        });
    </script>
</body>

</html>